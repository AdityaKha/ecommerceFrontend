<section>
    <div class="head">
        <h2>Products</h2>
        <button mat-stroked-button (click)="reload()"><mat-icon>refresh</mat-icon> Refresh</button>
    </div>

    @if (loading()) {
    <div class="state">
        <mat-progress-spinner mode="indeterminate" diameter="40"></mat-progress-spinner>
        <p>Loading...</p>
    </div>
    }

    @if (!loading() && error()) {
    <div class="state error">
        <p>{{ error() }}</p>
        <button mat-stroked-button (click)="reload()">Retry</button>
    </div>
    }

    @if (!loading() && !error() && products().length === 0) {
    <div class="state empty">
        <p>No products found.</p>
    </div>
    }

    @if (!loading() && !error()) {
    <div class="grid">
        @for (p of products(); track p.id) {
        <app-product-card [product]="p" (addToCart)="addToCart($event)"></app-product-card>
        }
    </div>
    }
</section>